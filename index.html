<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>–£–î–ê–ß–ê –¢–ï–õ–ï–ì–†–ê–ú–ú: –°–ï–ó–û–ù 2</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        :root {
            --gold: #f59e0b; --gold-glow: rgba(245, 158, 11, 0.4);
            --vip: #8b5cf6; --vip-glow: rgba(139, 92, 246, 0.4);
            --bg: #020617; --card: #0f172a; --text-muted: #94a3b8;
            --green: #10b981; --red: #ef4444;
        }

        body {
            font-family: 'Inter', -apple-system, sans-serif;
            background: var(--bg); color: white; margin: 0; padding: 15px;
            padding-bottom: 140px; overflow-x: hidden;
        }

        /* --- UI ELEMENTS --- */
        .glass {
            background: rgba(30, 41, 59, 0.7);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
        }

        .header {
            display: flex; justify-content: space-between; align-items: center;
            margin-bottom: 20px;
        }

        .balance-box { text-align: right; }
        .balance-box span { font-size: 10px; color: var(--text-muted); text-transform: uppercase; }
        .balance-val { font-size: 24px; font-weight: 900; color: var(--gold); }

        /* --- BANK WINDOW --- */
        .bank-window {
            padding: 20px; text-align: center; margin-bottom: 20px;
            background: radial-gradient(circle at top right, rgba(245, 158, 11, 0.15), transparent);
            position: relative; overflow: hidden;
        }

        .bank-title { font-size: 12px; color: var(--text-muted); letter-spacing: 2px; margin-bottom: 10px; }
        .bank-amount { font-size: 42px; font-weight: 900; margin-bottom: 15px; text-shadow: 0 0 20px var(--gold-glow); }

        .progress-container { width: 100%; height: 12px; background: #1e293b; border-radius: 10px; overflow: hidden; }
        .progress-bar { 
            height: 100%; width: 45%; 
            background: linear-gradient(90deg, var(--gold), #fbbf24); 
            box-shadow: 0 0 15px var(--gold); transition: 1s cubic-bezier(0.4, 0, 0.2, 1);
        }

        /* --- TICKET SELECTION --- */
        .ticket-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-bottom: 25px; }
        .ticket-card {
            padding: 15px; text-align: center; cursor: pointer; transition: 0.2s;
            border: 2px solid transparent;
        }
        .ticket-card.active { border-color: var(--gold); background: rgba(245, 158, 11, 0.05); }
        .ticket-card.vip.active { border-color: var(--vip); background: rgba(139, 92, 246, 0.05); }
        
        .ticket-card h3 { margin: 0 0 5px; font-size: 14px; }
        .ticket-price { font-size: 18px; font-weight: bold; color: var(--gold); }
        .ticket-card.vip .ticket-price { color: var(--vip); }
        .ticket-target { font-size: 10px; color: var(--text-muted); margin-top: 5px; }

        /* --- QUEUE TABLE --- */
        .section-title { font-size: 14px; font-weight: bold; margin-bottom: 12px; display: flex; justify-content: space-between; }
        .online-count { color: var(--green); font-size: 11px; }

        .queue-table { width: 100%; border-collapse: collapse; font-size: 13px; }
        .queue-table th { text-align: left; color: var(--text-muted); padding: 10px; font-weight: 400; font-size: 11px; }
        .queue-table td { padding: 12px 10px; border-top: 1px solid rgba(255,255,255,0.05); }
        .my-row { background: rgba(245, 158, 11, 0.1); color: var(--gold); font-weight: bold; }

        /* --- ACCELERATOR --- */
        .boost-box {
            margin-top: 20px; padding: 15px; display: flex; align-items: center; justify-content: space-between;
            background: linear-gradient(90deg, rgba(16, 185, 129, 0.1), transparent);
            border-left: 4px solid var(--green);
        }
        .boost-text div:first-child { font-weight: bold; font-size: 14px; }
        .boost-text div:last-child { font-size: 11px; color: var(--text-muted); }
        .boost-btn { background: var(--green); color: white; border: none; padding: 10px 15px; border-radius: 10px; font-weight: bold; }

        /* --- BOTTOM NAV --- */
        .footer {
            position: fixed; bottom: 0; left: 0; width: 100%; padding: 20px; box-sizing: border-box;
            background: linear-gradient(to top, var(--bg) 80%, transparent); z-index: 100;
        }
        .main-btn {
            width: 100%; padding: 18px; border-radius: 16px; border: none; font-size: 16px; font-weight: 900;
            text-transform: uppercase; letter-spacing: 1px; cursor: pointer;
            background: linear-gradient(90deg, #f59e0b, #d97706); color: black;
            box-shadow: 0 10px 30px var(--gold-glow); transition: 0.3s;
        }
        .main-btn:disabled { background: #334155; color: #94a3b8; box-shadow: none; opacity: 0.5; }

        /* --- SUCCESS MODAL --- */
        #win-modal {
            position: fixed; inset: 0; background: rgba(0,0,0,0.95); z-index: 1000;
            display: none; flex-direction: column; align-items: center; justify-content: center;
            text-align: center; padding: 20px;
        }
        .win-card {
            padding: 40px 20px; width: 100%; max-width: 320px;
            background: linear-gradient(135deg, #1e293b, #0f172a);
            border: 2px solid var(--gold); box-shadow: 0 0 50px var(--gold-glow);
        }
        .win-icon { font-size: 80px; margin-bottom: 20px; }

    </style>
</head>
<body>

    <div id="win-modal">
        <div class="glass win-card">
            <div class="win-icon">üí∞</div>
            <h1 style="color:var(--gold); margin:0">–ü–û–ë–ï–î–ê!</h1>
            <p style="color:var(--text-muted)">–í–∞—à–∞ –æ—á–µ—Ä–µ–¥—å –ø–æ–¥–æ—à–ª–∞!</p>
            <div style="font-size:32px; font-weight:900; margin:20px 0" id="win-sum">5000 ‚≠ê</div>
            <p style="font-size:12px; opacity:0.7">–°–¥–µ–ª–∞–π —Å–∫—Ä–∏–Ω—à–æ—Ç –∏ –ø–æ–¥–µ–ª–∏—Å—å —É–¥–∞—á–µ–π!</p>
            <button class="main-btn" onclick="closeWin()">–ó–ê–ë–†–ê–¢–¨ –ò –í–ï–†–ù–£–¢–¨–°–Ø</button>
        </div>
    </div>

    <div class="header">
        <div style="font-weight:900; letter-spacing:1px;">–£–î–ê–ß–ê <span style="color:var(--gold)">–¢–ì</span></div>
        <div class="balance-box">
            <span>–ú–æ–π –ë–∞–ª–∞–Ω—Å</span>
            <div class="balance-val" id="user-balance">0 ‚≠ê</div>
        </div>
    </div>

    <div class="glass bank-window">
        <div class="bank-title">–ù–ê–ü–û–õ–ù–ï–ù–ò–ï –ë–ê–ù–ö–ê (–í–´–ü–õ–ê–¢–ê ‚Ññ42)</div>
        <div class="bank-amount" id="pool-display">2,400 / 5,000 ‚≠ê</div>
        <div class="progress-container">
            <div class="progress-bar" id="pool-bar" style="width: 48%;"></div>
        </div>
        <div style="font-size: 10px; color: var(--text-muted); margin-top: 10px;">
            –ö–∞–∫ —Ç–æ–ª—å–∫–æ –ø–æ–ª–æ—Å–∫–∞ –∑–∞–ø–æ–ª–Ω–∏—Ç—Å—è, –ø–µ—Ä–≤—ã–π –∏–≥—Ä–æ–∫ –≤ –æ—á–µ—Ä–µ–¥–∏ –ø–æ–ª—É—á–∏—Ç –≤—ã–ø–ª–∞—Ç—É!
        </div>
    </div>

    <div class="ticket-grid">
        <div class="glass ticket-card active" id="mode-std" onclick="selectMode('standard')">
            <h3>–°–¢–ê–ù–î–ê–†–¢</h3>
            <div class="ticket-price">500 ‚≠ê</div>
            <div class="ticket-target">–í—ã—Ö–æ–¥: 5000 ‚≠ê</div>
        </div>
        <div class="glass ticket-card vip" id="mode-vip" onclick="selectMode('vip')">
            <h3>VIP –õ–ò–§–¢</h3>
            <div class="ticket-price" style="color:var(--vip)">2500 ‚≠ê</div>
            <div class="ticket-target">–í—ã—Ö–æ–¥: 25000 ‚≠ê</div>
        </div>
    </div>

    <div class="section-title">
        –î–í–ò–ñ–ï–ù–ò–ï –û–ß–ï–†–ï–î–ò
        <span class="online-count">‚óè <span id="online">4,281</span> –í –ò–ì–†–ï</span>
    </div>
    <div class="glass" style="overflow:hidden">
        <table class="queue-table">
            <thead>
                <tr>
                    <th>–ú–ï–°–¢–û</th>
                    <th>ID –ò–ì–†–û–ö–ê</th>
                    <th>–°–¢–ê–¢–£–°</th>
                </tr>
            </thead>
            <tbody id="queue-body">
                <tr><td>1</td><td>4482****</td><td style="color:var(--gold)">–û–ñ–ò–î–ê–ù–ò–ï</td></tr>
                <tr class="my-row"><td>14</td><td>–¢–´ (884***)</td><td>–í –û–ß–ï–†–ï–î–ò</td></tr>
                <tr><td>2</td><td>5512****</td><td>–í –û–ß–ï–†–ï–î–ò</td></tr>
            </tbody>
        </table>
    </div>

    <div class="glass boost-box">
        <div class="boost-text">
            <div>üöÄ –£—Å–∫–æ—Ä–∏—Ç–µ–ª—å –æ—á–µ—Ä–µ–¥–∏</div>
            <div>–ü—Ä—ã–≥–Ω–∏ –Ω–∞ 3 –ø–æ–∑–∏—Ü–∏–∏ –≤–ø–µ—Ä–µ–¥</div>
        </div>
        <button class="boost-btn" onclick="buyBoost()">250 ‚≠ê</button>
    </div>

    <div style="margin-top:20px; text-align:center;">
        <a href="#" onclick="copyRef()" style="color:var(--text-muted); font-size:12px; text-decoration:none;">üîó –ü—Ä–∏–≥–ª–∞—Å–∏—Ç—å –¥—Ä—É–≥–∞ (–°–¥–≤–∏–≥ –Ω–∞ 1 –ø–æ–∑–∏—Ü–∏—é)</a>
    </div>

    <div class="footer">
        <button class="main-btn" id="action-btn" onclick="handleAction()">–í–°–¢–ê–¢–¨ –í –û–ß–ï–†–ï–î–¨ (500 ‚≠ê)</button>
    </div>

    <script>
        const tg = window.Telegram.WebApp;
        tg.expand();
        tg.enableClosingConfirmation();

        let currentMode = 'standard';
        let userState = {
            inQueue: false,
            canWithdraw: false,
            balance: 0,
            pos: 0
        };

        const CONFIG = {
            standard: { price: 500, target: 5000, color: '#f59e0b' },
            vip: { price: 2500, target: 25000, color: '#8b5cf6' }
        };

        // --- –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø –ò –°–ò–ù–•–†–û–ù–ò–ó–ê–¶–ò–Ø ---
        function sync() {
            // –ó–¥–µ—Å—å –±—É–¥–µ—Ç –∑–∞–ø—Ä–æ—Å –∫ —Ç–≤–æ–µ–º—É API (get_user_data)
            // –ò–º–∏—Ç–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö:
            document.getElementById('online').innerText = (4000 + Math.floor(Math.random()*500)).toLocaleString();
            updateUI();
        }
        setInterval(sync, 5000);

        function updateUI() {
            const cfg = CONFIG[currentMode];
            const pool = Math.floor(cfg.target * 0.45); // –ò–º–∏—Ç–∞—Ü–∏—è –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è –ø—É–ª–∞

            document.getElementById('pool-display').innerText = `${pool.toLocaleString()} / ${cfg.target.toLocaleString()} ‚≠ê`;
            document.getElementById('pool-bar').style.width = '45%';
            document.getElementById('pool-bar').style.background = cfg.color;

            const btn = document.getElementById('action-btn');
            if (userState.canWithdraw) {
                btn.innerText = `–í–´–í–ï–°–¢–ò ${cfg.target} ‚≠ê`;
                btn.style.background = 'linear-gradient(90deg, #10b981, #059669)';
            } else if (userState.inQueue) {
                btn.innerText = `–¢–´ –í –û–ß–ï–†–ï–î–ò (–ú–ï–°–¢–û: ${userState.pos})`;
                btn.disabled = true;
            } else {
                btn.innerText = `–í–°–¢–ê–¢–¨ –í –û–ß–ï–†–ï–î–¨ (${cfg.price} ‚≠ê)`;
                btn.disabled = false;
                btn.style.background = `linear-gradient(90deg, ${cfg.color}, #000)`; // –£–ø—Ä–æ—â–µ–Ω–Ω–æ
                btn.style.color = currentMode === 'vip' ? 'white' : 'black';
            }
        }

        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('mode-std').classList.toggle('active', mode === 'standard');
            document.getElementById('mode-vip').classList.toggle('active', mode === 'vip');
            updateUI();
        }

        // --- –î–ï–ô–°–¢–í–ò–Ø ---
        function handleAction() {
            if (userState.canWithdraw) {
                tg.showConfirm("–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –ø–æ–¥–∞—Ç—å –∑–∞—è–≤–∫—É –Ω–∞ –≤—ã–≤–æ–¥?", (ok) => {
                    if(ok) {
                        tg.showAlert("‚úÖ –ó–∞—è–≤–∫–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞ –∞–¥–º–∏–Ω—É! –ü–æ—Å–ª–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤—ã –ø–æ–ª—É—á–∏—Ç–µ –≤—ã–ø–ª–∞—Ç—É –∏ —Å–º–æ–∂–µ—Ç–µ –∑–∞–π—Ç–∏ –≤ –æ—á–µ—Ä–µ–¥—å —Å–Ω–æ–≤–∞.");
                        // –í —Ä–µ–∞–ª—å–Ω–æ—Å—Ç–∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –∑–∞–ø—Ä–æ—Å –Ω–∞ /request_withdraw
                    }
                });
            } else {
                tg.showAlert(`–û–ø–ª–∞—Ç–∞ ${CONFIG[currentMode].price} ‚≠ê —á–µ—Ä–µ–∑ Telegram Stars...`);
                // –í—ã–∑–æ–≤ –∏–Ω–≤–æ–π—Å–∞
            }
        }

        function buyBoost() {
            tg.showConfirm("–£—Å–∫–æ—Ä–∏—Ç—å—Å—è –Ω–∞ 3 –ø–æ–∑–∏—Ü–∏–∏ –∑–∞ 250 ‚≠ê?", (ok) => {
                if(ok) tg.showAlert("üöÄ –£—Å–∫–æ—Ä–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–æ!");
            });
        }

        function copyRef() {
            const link = "t.me/starbird_bot?start=" + tg.initDataUnsafe.user.id;
            tg.showAlert("–°—Å—ã–ª–∫–∞ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞! –û—Ç–ø—Ä–∞–≤—å –µ—ë –¥—Ä—É–≥—É, –∏ –∫–æ–≥–¥–∞ –æ–Ω –∫—É–ø–∏—Ç –±–∏–ª–µ—Ç, —Ç—ã —Å–¥–≤–∏–Ω–µ—à—å—Å—è –≤ –æ—á–µ—Ä–µ–¥–∏ –≤–ø–µ—Ä–µ–¥.");
        }

        function showWin(amount) {
            document.getElementById('win-sum').innerText = amount + " ‚≠ê";
            document.getElementById('win-modal').style.display = 'flex';
        }

        function closeWin() {
            document.getElementById('win-modal').style.display = 'none';
        }

        // –ü–µ—Ä–≤–∏—á–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞
        sync();
        
        // –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –≤—ã–∏–≥—Ä—ã—à–Ω–æ–≥–æ –æ–∫–Ω–∞ (–¥–ª—è —Ç–µ–±—è)
        // setTimeout(() => showWin(5000), 3000);

    </script>
</body>
</html>
